# Codex Implementer 기본 설정
# 이 파일을 수정하여 기본 동작을 커스터마이징할 수 있습니다.

# Codex CLI 기본 옵션
codex:
  # Full-auto 모드 (--full-auto 플래그)
  # 자동 승인 + workspace-write 샌드박스 조합 (권장)
  full_auto: true

  # 샌드박스 모드 (--sandbox 옵션)
  # - read-only: 읽기 전용
  # - workspace-write: 작업 디렉토리 쓰기 허용 (기본)
  # - danger-full-access: 전체 접근 (위험)
  sandbox: "workspace-write"

  # 사용할 모델 (-m 옵션)
  # - gpt-5.2-codex: 최신 Codex 모델 (기본)
  # - gpt-4o: 높은 품질, 복잡한 작업에 적합
  # - o4-mini: 빠르고 비용 효율적
  model: "gpt-5.2-codex"

  # 작업당 타임아웃 (초)
  timeout: 300

  # exec 서브커맨드 사용 (비대화형 모드)
  use_exec: true

# 구현 모드별 설정
modes:
  # 단일 구현 모드
  single:
    max_files: 5              # 한 번에 수정할 최대 파일 수
    timeout: 180              # 타임아웃 (초)
    auto_test: true           # 구현 후 자동 테스트 실행

  # 병렬 구현 모드
  parallel:
    max_agents: 5             # 최대 동시 에이전트 수
    timeout: 300              # 에이전트당 타임아웃
    conflict_check: true      # 파일 충돌 사전 검사
    wait_strategy: "all"      # all: 전체 완료 대기, any: 하나라도 완료시

  # 점진적 구현 모드
  incremental:
    max_phases: 5             # 최대 단계 수
    review_between: true      # 단계 간 Claude 검토
    auto_proceed: false       # 자동 다음 단계 진행

  # 리팩토링 모드
  refactoring:
    backup: true              # 리팩토링 전 백업
    verify_tests: true        # 테스트 통과 확인

# 출력 설정
output:
  # 로그 저장 위치
  log_dir: "./codex_output"

  # 요약 파일 생성
  generate_summary: true

  # 상세 로그 레벨 (debug, info, warn, error)
  log_level: "info"

# 안전 설정
safety:
  # 수정 전 git 상태 확인
  check_git_status: true

  # 커밋되지 않은 변경사항 있으면 경고
  warn_uncommitted: true

  # 금지된 파일 패턴 (수정 불가)
  forbidden_patterns:
    - ".env"
    - "*.key"
    - "*.pem"
    - "credentials.*"

# 프롬프트 템플릿 설정
templates:
  # 기본 템플릿 경로
  base_path: "./templates"

  # 프로젝트별 컨텍스트 자동 주입
  inject_context: true

  # 컨텍스트 포함 항목
  context_includes:
    - "package.json"          # 의존성 정보
    - "tsconfig.json"         # TypeScript 설정
    - ".eslintrc.*"           # 린트 규칙

# 통합 설정
integration:
  # Claude 검토 자동 요청
  auto_claude_review: true

  # 테스트 프레임워크 자동 감지
  detect_test_framework: true

  # 빌드 명령어 (자동 감지 실패 시)
  build_command: "npm run build"
  test_command: "npm test"
